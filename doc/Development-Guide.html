<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<link type="text/css" rel="stylesheet" href="bootstrap.min.css" />
<title>Development Guide</title>
</head>

<body>

<h3>Introduction</h3>
<p>In <a href="Getting-Started.html">Getting Started</a> document, a new sample project is created named 
"<strong>Acme.PhoneBook</strong>". This document is a guide while developing your projects. 
We definitely suggest to ready this document carefully before starting 
development. Since ASP.NET Zero is built on
<a href="http://www.aspnetboilerplate.com/" target="_blank">ASP.NET Boilerplate</a> 
application framework, this document highly refers it's 
<a href="http://www.aspnetboilerplate.com/Pages/Documents">documentation</a>.</p>
<p>Before reading this document, it's adviced to run the application and explore 
user interface. This will help you to better understand concepts defined here.</p>
<h4>Solution Structure (Layers)</h4>
<p>When you create and <a href="/Download">download</a> your project, there will be a solution structure 
as shown below:</p>
<p>
<img class="img-thumbnail" alt="ASP.NET Zero solution structure" height="166" src="images/solution-overall.png" width="249" /></p>
<p>There are 6 projects in the solution:</p>
<ul>
	<li><strong>Core</strong> project contains domain layer classes (like
	<a href="http://www.aspnetboilerplate.com/Pages/Documents/Entities">entities</a> 
	and
	<a href="http://www.aspnetboilerplate.com/Pages/Documents/Domain-Services">
	domain services</a>).</li>
	<li><strong>Application</strong> project contains application logic (like <a href="http://www.aspnetboilerplate.com/Pages/Documents/Application-Services">application 
	services</a> and
	<a href="http://www.aspnetboilerplate.com/Pages/Documents/Data-Transfer-Objects">
	DTO</a>s). </li>
	<li><strong>EntityFramework</strong> project contains your DbContext,
	<a href="http://www.aspnetboilerplate.com/Pages/Documents/Repositories">
	repository</a> implementations, database migrations and other 
	EntityFramework specific concepts. </li>
	<li><strong>WebApi</strong> project contains Web API Controllers.</li>
	<li><strong>Web</strong> project contains the presentation layer 
	(javascripts, styles and views). </li>
	<li><strong>Tests </strong>project contains unit and integration tests.</li>
</ul>

<p>ASP.NET Zero solution contains two applications:</p>
<ul>
	<li>A <strong>Multi-Page MVC</strong> application. This can be used to 
	create a public web site or a landing page for your application.</li>
	<li>A <strong>Single-Page AngularJs</strong> application. This is the actual 
	application which is entered by username and password.</li>
</ul>
<h4>Multi tenancy</h4>
<p>Multi-tenancy is used to build <strong>SaaS</strong> (Software as a Service) 
applications easily. Wtih this technique, we can deploy <strong>single 
application</strong> and <strong>single database</strong> to serve to <strong>
multiple customers</strong>. Each Tenant 
will have it's own <strong>roles</strong>, <strong>users</strong> and <strong>settings</strong>.</p>
<p>ASP.NET Zero's all code-base is developed to be multi-tenant. But, it 
<a href="Getting-Started#DocConfigureMultiTenancy">can be 
disabled</a> with a single line of configuration if we're developing 
single-tenant application. When you disable it, all multi-tenancy stuff will be 
hidden and not available. If multi-tenancy is disabled, there will be a single 
tenant named <strong>Default</strong>.&nbsp;</p>
<p>There are two types of perspective in multi-tenant applications:</p>
<ul>
	<li><strong>Host</strong>: Manages tenants and system.</li>
	<li><strong>Tenant</strong>: Uses the application features.</li>
</ul>
<p>ASP.NET Zero uses ABP's (ASP.NET Boilerplate)
<strong>data 
filters</strong>. So, it automatically filters tenant datas if you properly use 
filter interfaces. Read data filters
<a href="http://www.aspnetboilerplate.com/Pages/Documents/Data-Filters">
documentation</a> carefully if you are building multi-tenant applications.</p>
<h3>Used Library &amp; Frameworks</h3>
<p>Many open source frameworks and libraries are used to build ASP.NET Zero 
project. Here, a list of all libraries.</p>
<ul>
	<li>Server side<ul>
		<li>ASP.NET MVC</li>
		<li>ASP.NET Web API</li>
		<li>ASP.NET Boilerplate &amp; Module-Zero</li>
		<li>ASP.NET Identity Framework</li>
		<li>ASP.NET Web Optimization Framework</li>
		<li>EntityFramework</li>
		<li>EntityFramework.DynamicFilters</li>
		<li>Castle Windsor</li>
		<li>AutoMapper</li>
		<li>Log4Net</li>
		<li>RecaptchaNet</li>
	</ul>
	</li>
	<li>Client side<ul>
		<li>AngularJs</li>
		<li>Angular-UI-Bootstrap</li>
		<li>Angular-UI-Router</li>
		<li>Angular-UI-Utils</li>
		<li>Angular-UI-Grid</li>
		<li>Angular File Upload</li>
		<li>Angular Date Range Picker</li>
		<li>Angular ocLazyLoad</li>
		<li>jQuery</li>
		<li>jQuery-BlockUI</li>
		<li>jQuery-Cookie</li>
		<li>jQuery-Slimscroll</li>
		<li>jQuery-Sparkline</li>
		<li>jQuery-Uniform</li>
		<li>jQuery-Validation</li>
		<li>Twitter Bootstrap</li>
		<li>Bootstrap Hover Dropdown</li>
		<li>Bootstrap Date Range Picker</li>
		<li>Modernizr</li>
		<li>Moment.js</li>
		<li>Underscore.js</li>
		<li>JsTree</li>
		<li>Morris</li>
		<li>Respondjs</li>
		<li>Font-Awesome</li>
		<li>Simple Line Icons</li>
		<li>SpinJs</li>
		<li>SweetAlert</li>
		<li>Toastr</li>
		<li>And Metronic Theme</li>
	</ul>
	</li>
</ul>

<h3>MVC application</h3>
<p>ASP.NET Zero contains front-end pages that can be a starting point for your 
public web site or a landing page for the application. When you first run the 
project, you will see the Home Page as shown below:</p>
<p>
<img class="img-thumbnail" alt="Frontend home page" height="496" src="images/frontend-homepage.jpg" width="500" /></p>
<p>There are two pages here: <strong>Home Page</strong> and <strong>About</strong>. 
Contents of these pages are just placeholders and for demo purposes. You can 
completely remove content and build your page as your needs. Also, you should 
change the <strong>logo</strong> with your Company's logo.</p>
<p>See
<a href="http://www.keenthemes.com/preview/metronic/theme/templates/frontend/" target="_blank">
metronic front-end theme </a>for all possibilities and components to build a 
richer web site.</p>
<p>Menus 
are defined in <strong>AppNavigationProvider</strong> class. When you add a new 
menu item here, it will be automatically shown in the menu. There is a <strong>Login</strong> 
link at the top right corner. This link takes us to the Login page to enter the 
AngularJs application.</p>
<h4>Layout</h4>
<p>Layout of front-end pages are located under <strong>Views/Layout</strong> folder of the 
<strong>.Web</strong> project:</p>
<p>
<img class="img-thumbnail" alt="Layout views" height="234" src="images/frontend-layout-views.png" width="168" /></p>
<p><strong>_Layout</strong> is the main layout file that includes scripts and 
styles. Language flags and the menu is rendered in <strong>_Header</strong> 
file. _PreFooter is not used but you can add it to the _Layout if you want.</p>
<h3>Account Controller</h3>
<p><strong>AccountController</strong> provides <strong>login</strong>, <strong>register</strong>,
<strong>forgot password </strong>and <strong>email activation</strong> pages.</p>
<h4>Layout</h4>
<p>Account management pages have a seperated <strong>_Layout</strong> view under 
Views/Account folder:</p>
<p>
<img class="img-thumbnail" alt="Account Controller Views" height="324" src="images/account-views.png" width="214" /></p>
<h4>Login</h4>
<p>Main view for AccountController is the Login page:</p>
<p>
<img class="img-thumbnail" alt="Login page" height="414" src="images/login-screen.png" width="431" /></p>
<p>The first input is <strong>tenancy name</strong> which is shown only in a 
multi-tenant application if "subdomain tenancy name detection" is not possible 
(See host settings section). There is a single tenant named <strong>Default</strong> 
in the initial database (See Entity framework section for initial seed 
data).&nbsp;Leave tenancy name input as blank to login as <strong>host</strong>.</p>
<p>We can use <strong>admin</strong> user name and <strong>123qwe</strong> 
password in first run the application. At first login, we should change admin 
password since 123qwe is not very secure:</p>
<p>
<img class="img-thumbnail" alt="Change password" height="304" src="images/account-change-password.png" width="422" /></p>
<p>
After changing password we are redirected to the Angular application.</p>
<h4>Register</h4>
<p>When we click the "<strong>Create Account</strong>" link in the login page, a 
registration form is shown:</p>
<p>
<img class="img-thumbnail" alt="Registration form" height="488" src="images/registration-form-small.png" width="250" /></p>
<p>A user can be register for a tenant, not for host if this is a multi-tenant 
application. If it's single-teant, there will be no tenancy name input here.</p>
<p>Recaptcha (security question) is optional. It uses Google's recaptcha 
service. Recaptcha service works per domain. So, to make it properly work, you 
should create your own private and public keys for your domain on
<a href="https://www.google.com/recaptcha">https://www.google.com/recaptcha</a> 
and replace keys in <strong>web.config</strong> file.</p>
<h4>Email Activation</h4>
<p>When a user registers as shown above, an email confirmation code is sent to 
his email address. If user did not receive this email for some reason, he can 
click Email activation and re-send the confirmation code.</p>
<p>
<img class="img-thumbnail" alt="Email activation screen" height="363" src="images/email-activation.png" width="417" /></p>
<p>Again, Tenancy name input is not shown for a single-tenant application or 
tenant name is known via subdomain (like tenancyname.mydomain.com).</p>
<h4>Forgot Password</h4>
<p>If a user forgots his password, he can click the "Forgot Password" link to 
get an email to reset the password.</p>
<p>
<img class="img-thumbnail" alt="Forgot password" height="359" src="images/forgot-password.png" width="421" /></p>
<h3>Angular Application</h3>
<p>The main application in ASP.NET Zero is a <strong>Single-Page AngularJs 
Application</strong>. When you login, you are redirected to the <strong>
ApplicationController</strong>. It returns the layout view of the application.</p>
<h4>Application Folders</h4>
<p>All view, script and styles files are located in <strong>App</strong> folder:</p>
<p>
<img class="img-thumbnail" alt="Angular App folder structure" height="413" src="images/app-folders.png" width="152" /></p>
<p>There are three main folders here:</p>
<ul>
	<li><strong>common</strong>: Contains common resources used by both host and 
	tenants.</li>
	<li><strong>host</strong>: Contains host-specific resources.</li>
	<li><strong>tenant</strong>: Contains tenant-specific resources.</li>
</ul>
<p>So, if we have a view, directive, service, image... used by both tenants and 
host, we should place it under <strong>common</strong> folder as shown above. We should place tenant or host 
specific directives, services.. under it's own folder, no to common. If you're 
developing a single-tenant application, you can place your files under tenant.</p>
<h4>Main Menu</h4>
<p>Application's main menu is defined in <strong>AppNavigationProvider</strong> 
class. See ABP's
<a href="http://www.aspnetboilerplate.com/Pages/Documents/Navigation">navigation 
documentation</a> to have a deep understanding on creating menus.</p>
<h4>Routes</h4>
<p><strong>app.js</strong> is entrance point of the application. We define 
the <strong>app</strong> angular module and angular <strong>routes</strong> in 
this file. Angular <strong>ui-router</strong> is used for routing. Routes (states in ui-router) is dynamically defined based on current user's 
permissions (see authorization section). Example:</p>
<pre lang="js">if (abp.auth.hasPermission(&#39;Pages.Administration.Tenant.Settings&#39;)) {
    $stateProvider.state(&#39;tenant.settings&#39;, {
        url: &#39;/settings&#39;,
        templateUrl: &#39;~/App/tenant/views/settings/index.cshtml&#39;,
        menu: &#39;Administration.Settings.Tenant&#39;
    });
}</pre>
<p>Conditional routing definition prevents user to enter an unauthorized page by 
just entering a URL to browser's address bar. <strong>Menu</strong> definition 
helps us to highlight given menu when this route is activated.</p>
<p>As you see, <strong>.cshtml</strong> files are used as views. While simply
<strong>.html</strong> files can be used, using .cshtml files allows us to take 
advantage of razor's power while creating views. Note that this is not same as 
MVC's view, since this is a Angular SPA (Single-Page Application).</p>
<h4>Layout</h4>
<p>Layout of the application is located under common/views/<strong>layout</strong> 
folder. All scripts and styles in App folder is automatically 
<strong>bundled</strong> (See BundleConfig.cs) and added to the layout.</p>
<p><img class="img-thumbnail" alt="App layout" height="216" src="images/app-layout.png" width="154" /></p>
<p>Layout consists of different parts as shown above. Main menu is rendered in
<strong>sidebar</strong>.</p>
<h4>Tenant Management</h4>
<p>If you're not developing a multi-tenant application, you can skip this 
section.</p>
<p>If this is a multi-tenant application and you logged in as a host user, then 
tenants page is shown:</p>
<p>
<img class="img-thumbnail" alt="Tenant management" height="387" src="images/tenant-management.png" width="720" /></p>
<p>A tenant is represented by <strong>Tenant</strong> class. There is a single tenant, named <strong>Default</strong> as initial.<strong> Tenancy Name</strong> (code name) is the <strong>unique</strong> name 
of a tenant. A&nbsp;tenant can be <strong>active</strong> of <strong>passive</strong>. 
If it's passive, no user of this tenant can login to the application.</p>
<p>When we 
click the "Create new Tenant" button, a dialog is shown:</p>
<p>
<img class="img-thumbnail" alt="Create tenant" height="521" src="images/create-tenant.png" width="620" /></p>
<p><strong>Tenancy name</strong> should be unique and not contain spaces or 
other special chars since it may be used as subdomain name (like 
tenancyname.mydomain.com, see the section below). <strong>Name</strong> can be anything. <strong>Admin email</strong> 
is used as email address of the admin user of new tenant. Admin user is 
automatically created with the tenant. We can set a random password for admin and send activation email. When user 
first login, he should change the password. We can uncheck this to enter a known 
password.</p>
<p>Also, we can create or edit a tenant. All tenant actions are handled by <strong>TenantAppService</strong> class and 
<strong>authorized</strong>. Example:</p>
<pre lang="cs">[AbpAuthorize(AppPermissions.Pages_Tenants_Delete)]
public async Task DeleteTenant(EntityRequestInput input)
{
    var tenant = await TenantManager.GetByIdAsync(input.Id);
    CheckErrors(await TenantManager.DeleteAsync(tenant));
}</pre>
<p>TenantAppService mostly uses <strong>TenantManager</strong> domain service 
for tenant operations..</p>
<h5>Using Tenancy Name As Subdomain</h5>
<p>Multi-tenant application generally uses subdomain to identify current tenant.
<strong>tenant1</strong>.mydomain.com, <strong>tenant2</strong>.mydomain.com and 
so on. ASP.NET Zero automatically identify and get tenant name from subdomain 
(See host settings).</p>
<h4>Role Management</h4>

<p>When we click Administrator/Roles menu, we enter to the role management page:</p>
<p>
<img class="img-thumbnail" alt="Role management" height="446" src="images/role-management.png" width="718" /></p>
<p>&nbsp;Roles are used to <strong>group permissions</strong>. When a user has a 
role, then he/she will have all permissions of that role.</p>
<p>A role is represented by the <strong>Role</strong> class. <strong>RoleManager</strong> performs domain logic, <strong>RoleAppService</strong> 
performs application logic for roles.</p>
<p>&nbsp;Roles can be 
dynamic or static:</p>

<ul>
	<li><strong>Static role</strong>: A static role has a known <strong>name
	</strong>(like 'admin') and can not change this name (we can change <strong>
	display name</strong>). It's exists on the system startup and can not be 
	deleted. Thus, we can write codes based on a static role name.</li>
	<li><strong>Dynamic role</strong>: We can create a dynamic role 
	after deployment. Then we can grant permissions for that role, we can assign 
	the role to some users and we can delete it. We can not know names of 
	dynamic roles in development time.</li>
</ul>

<p>One or more roles can be set as <strong>default</strong>. Default roles are 
assigned to new added/registered users as default. This is not a development 
time property and can be set or changed after deployment.</p>

<p>In startup project, we have static <strong>admin </strong>role for host (for 
multi-tenant apps). Also, we have static <strong>admin </strong>and <strong>user </strong>
roles for tenants. <strong>Admin </strong>roles have all permissions granted by 
default. <strong>User </strong>role is the <strong>default</strong> role for new users and has no 
permission by default. These can be changed easily. See <strong>StaticRoleNames</strong> class for 
all static roles and <strong>AppRoleConfig</strong> for changing static roles.</p>
<h5>Role Permissions</h5>
<p>Since roles are used to group permissions, we can set permissions of a role 
while creating or editing as shown below:</p>
<p>
<img class="img-thumbnail" alt="Role permissions" height="554" src="images/role-permissions.png" width="618" /></p>
<p>Note: Every tenant has it's own roles and any change in roles for a tenant does not effect other 
tenants. Also, host has also own isolated roles.</p>
<h4>User Management</h4>

<p>When we click Administrator/Users menu, we enter to the user management page:</p>
<p>
<img class="img-thumbnail" alt="User Management" height="315" src="images/user-management.png" width="720" /></p>

<p><strong>Users</strong> are people who can <strong>login </strong>to the application and 
perform some operations based on their <strong>permissions</strong>.</p>
<p><strong>User</strong> class represents a user. <strong>UserManager</strong> 
is used to perform domain logic, <strong>UserAppService</strong> is used to 
perform application logic for users.</p>

<p>A user can have zero or more <strong>roles</strong>. If a user has more than 
one role, he inherits union of 
permissions of all these roles. Also, we can set <strong>user-specific permission</strong>. 
A user specific permission setting overrides role settings for this permission. 
A screenshot of user permission dialog:</p>
<p>
<img class="img-thumbnail" alt="User Permissions" height="481" src="images/user-permissions.png" width="620" /></p>
<p>A dialog is used to create/edit a user:</p>
<p>
<img class="img-thumbnail" alt="Editing User" height="534" src="images/edit-user.png" width="400" /></p>
<p>We can change user's <strong>password</strong>, make him <strong>
active/passive</strong> and so on... A user can have a <strong>profile picture</strong>. 
It can be changed by the user (See User Menu section). <strong>Admin</strong> 
user can not be deleted as a business rule. If you don't want to use admin, you 
can make it passive.</p>
<h4>Audit Logs</h4>
<p>In audit logs page, we can see all user interactions with the application:</p>
<p>
<img class="img-thumbnail" alt="Auidt Logs Page" height="499" src="images/audit-logs.png" width="800" /></p>
<p>All application service methods and MVC controller actions are automatically logged and can be viewed 
here. See
<a href="http://www.aspnetboilerplate.com/Pages/Documents/Audit-Logging">audit 
logs documentation</a> to learn how to configure it. When we click the magnifier 
icon, we can see all details an audit log:</p>
<p>
<img class="img-thumbnail" alt="Audit Log" height="827" src="images/audit-logs-detail.png" width="620" /></p>
<p>
Audit log report are provided by <strong>AuditLogAppService</strong> class.</p>
<h4>Host Settings</h4>
<p>Host settings page is used to configure some system settings:</p>
<p>
<img class="img-thumbnail" alt="General Host Settings" height="256" src="images/host-settings-general.png" width="663" /></p>
<p>Web site root address is important, especially in production. {TENANCY_NAME} 
is a placeholder for subdomains. It's <strong>optional</strong> (both for multi 
and single tenant applications). If supplied, current tenant name 
is automatically detected.</p>
<p>To make tenancy name subdomains properly work, we should make two 
configuration beside the application:</p>
<ol>
	<li>We should configure DNS to redirect all subdomains to a static IP 
	address. To declare 'all subdomains', we can use wildcard like 
	'*.mydomain.com'.</li>
	<li>We should configure IIS to bind this static IP to our application.</li>
</ol>
<p>There may be other ways of doing it but this is the most simple way.</p>
<p>In host settings page, there are also other settings. SAVE ALL button saves 
all settings in one click. HostSettingAppService is used to retrieve and save 
settings (See setting provider section for more information).</p>

<h4>Tenant Settings</h4>
<p>In a multi-tenant application, tenant settings are shown as below:</p>
<p>
<img class="img-thumbnail" alt="Tenant settings" height="390" src="images/tenant-settings2.png" width="765" /></p>
<p>If we disable multi-tenancy, some host settings are shown in this page (since 
there is no host setting page):</p>
<p>
<img class="img-thumbnail" alt="Tenant settings extended" height="717" src="images/tenant-settings-2.png" width="689" /></p>
<p>TenantSettingAppService is used to get/set tenant settings.</p>
<h5>Enabling LDAP (Active Directory) Authentication</h5>
<p>LDAP (Active Directory) Authentication is disabled by default. To make it 
work, we should disable multi-tenancy since LDAP auth is not used in a 
multi-tenant system normally. In CoreModule class in .Core project, we should 
enable the following line:</p>
<pre lang="cs">Configuration.Modules.ZeroLdap().Enable(typeof(AppLdapAuthenticationSource));</pre>
<p>Then, we can see <strong>LDAP settings</strong> section in settings page:</p>
<p>
<img alt="LDAP Settings" height="569" src="images/tenant-settings-ldap.png" width="764" /></p>
<p>We can check "<strong>Enable LDAP Authentication</strong>" to enable it. If 
the server works in domain and application runs with a domain user or local 
system, then generally even no need to set Domain name, user and password. You 
can logout and then login with your <strong>domain user name and password</strong>. 
If not, you should set these informations also.</p>

<h4>Tenant Dashboard</h4>
<p>ASP.NET Zero startup project also includes a <strong>sample</strong> 
dashboard. It's just for demo purposes, you can make it as a start point for 
your actual dashboard:</p>
<p>
<img class="img-thumbnail" alt="Dashboard sample" height="484" src="images/default-dashboard.png" width="800" /></p>
<p>Here, only Member Activity graph data is retrieved from server (from 
TenantDashboardAppService). You can click refresh button to generate random 
data.</p>
<h4>User Menu</h4>
<p>A user can click his name at top right corner to open user menu:</p>
<p><img class="img-thumbnail" alt="User menu" height="247" src="images/user-menu.png" width="221" /></p>
<h5>Profile Settings</h5>
<p>My settings is used to change user profile settings:</p>
<p>
<img class="img-thumbnail" alt="User settings" height="435" src="images/user-settings.png" width="615" /></p>
<p>As shown here, <strong>admin</strong> user name can not be changed. It's 
considered a special user name since it's used in database migration seed. Other 
users can change their usernames. <strong>ProfileAppService</strong> is used to 
get/change settings.</p>
<h5>Change Picture</h5>
<p>A user can change own profile picture. <strong>ProfileController</strong> is 
used to upload and get user profile pictures.
<a href="https://github.com/nervgh/angular-file-upload" target="_blank">Angular 
file upload</a> module used to select and upload profile picture to the server. 
Currently, only jpg/jpeg files are supported, you can extend it.</p>
<h5>Change Password</h5>
<p><strong>ProfileAppService</strong> is used to change password.</p>
<h5>Logout</h5>
<p><strong>AccountController</strong> is used to logout the user and redirect to 
Login page.</p>
<h3>Infrastructure</h3>
<h4>Dynamic Web API Layer</h4>
<p>Since application is built on AngularJs and it's a Single-Page Application 
(SPA), application services are used via AJAX. So, it's needed to create web API 
controllers as adapter (A Client calls Web API Controller action via AJAX, then 
it calls application service method).</p>
<p>ABP framework automatically creates
<a href="http://www.aspnetboilerplate.com/Pages/Documents/Dynamic-Web-API">
dynamic web API layer</a> using application service interface definitions. So, 
there is no web API Controller actually. We build dynamic web api controllers in 
PhoneBook<strong>WebApiModule</strong> class in .WebApi project.</p>
<p>While ABP dynamically create Web API Controllers, we can also create regular 
Web API Controllers as we always do.</p>
<p>See
<a href="http://www.aspnetboilerplate.com/Pages/Documents/Dynamic-Web-API">
dynamic Web API layer documentation</a> for more.</p>
<h4>Localization</h4>
<p>ASP.NET Zero <strong>UI</strong> is completely
localized. Localization is implemented using XML files shown below:</p>
<p>
<img class="img-thumbnail" alt="Localization files" height="130" src="images/localization-files.png" width="179" /></p>
<p>PhoneBook will be your ProjectName. <strong>English</strong> and <strong>Turkish</strong> 
localization is ready here. You can add more XML files by copying one XML file and 
translate to desired language. Notice that these XML files should be <strong>
embedded resource</strong>. See
<a href="http://www.csharp-examples.net/culture-names/" target="_blank">valid 
culture codes</a>.</p>
<p>See <a href="http://www.aspnetboilerplate.com/Pages/Documents/Localization">
localization documentation</a> for more.</p>
<h4>EntityFramework Integration</h4>
<p>ASP.NET Zero template uses EntityFramework <strong>code-first</strong> and 
<strong>migrations</strong>. PhoneBook<strong>DbContext</strong> (YourProjectDbContext for your project) 
defines the DbContext class. <strong>Migrations</strong> folder contains EF migrations. </p>
<p>PhoneBook<strong>RepositoryBase</strong> class is the base class for your
custom repositories. See entity
<a href="http://www.aspnetboilerplate.com/Pages/Documents/EntityFramework-Integration">
framework integration</a> documentation for more.</p>
<h4>Authorization Provider</h4>
<p>Authorization system is based on permissions. <strong>AppPermissions </strong>
contains constants for permission names and <strong>
AppAuthorizationProvider</strong> class defines all permissions in the system. 
We should define a permission here before using it in application layer.</p>
<p>See <a href="http://www.aspnetboilerplate.com/Pages/Documents/Authorization">
authorization documentation</a> to learn how to configure permissions.</p>
<h4>Setting Provider</h4>
<p>Every setting has a unique name. Setting names are defined in <strong>
AppSettings</strong> class as constants. All settings and their default values are defined in <strong>AppSettingProvider</strong> class.</p>
<p>See
<a href="http://www.aspnetboilerplate.com/Pages/Documents/Setting-Management">
setting documentation</a> to learn how to create and use settings.</p>
<h4>Navigation Provider</h4>
<p>Menus are dynamically generated using definitions in <strong>
AppNavigationProvider</strong> class. We have two menus: <strong>Main</strong> 
(the main menu in Angular application) and <strong>FrontEnd</strong> (Main menu 
in front-end web site).</p>
<p>See <a href="http://www.aspnetboilerplate.com/Pages/Documents/Navigation">
navigation documentation</a> for more information.</p>
<h4>Logging</h4>
<p>ASP.NET Zero uses <strong>Log4Net</strong> for logging 
as default. Configuration is defined in <strong>log4net.config</strong> file in 
the .Web project. It writes all logs 
into <strong>Logs</strong> folder of web site as default. When you publish your 
project, remember to configure <strong>write permission</strong> to Logs folder.</p>
<p>Check <a href="http://www.aspnetboilerplate.com/Pages/Documents/Logging">
logging documentation</a> to see how to inject ILogger and write logs.</p>
<h4>DTO Mappings</h4>
<p>ASP.NET Zero uses <a href="http://automapper.org/" target="_blank">AutoMapper</a> 
for DTO to Entity mappings (and other types of object-to-object mappings). We 
use Abp.AutoMapper library that makes usage of AutoMapper simpler and 
declarative.</p>
<p>See the DTO class that is used to transfer a tenant editing information:</p>
<pre lang="cs">[AutoMap(typeof (Tenant))]
public class TenantEditDto : EntityDto, IDoubleWayDto
{
    [Required]
    [StringLength(Tenant.MaxTenancyNameLength)]
    public string TenancyName { get; set; }

    [Required]
    [StringLength(Tenant.MaxNameLength)]
    public string Name { get; set; }

    public bool IsActive { get; set; }
}</pre>
<p>Here, <strong>AutoMap</strong> attribute automatically creates mapping between 
<strong>TenantEditDto</strong> 
and <strong>Tenant</strong> classes. Then we can automatically convert a Tenant object to 
TenantEditDto object as shown below:</p>
<pre lang="cs">[AbpAuthorize(AppPermissions.Pages_Tenants_Edit)]
public async Task&lt;TenantEditDto&gt; GetTenantForEdit(EntityRequestInput input)
{
    return (await TenantManager.GetByIdAsync(input.Id)).<strong>MapTo</strong>&lt;TenantEditDto&gt;();
}</pre>
<p>MapTo method does mapping. See <a href="http://www.aspnetboilerplate.com/Pages/Documents/Data-Transfer-Objects">
Data Transfer Objects documentation</a> for more information on DTOs.</p>
<h4>Sending Emails</h4>
<p>ASP.NET Zero sends emails to users in some cases (like forgot password and 
email confirmation). Email template is defined in <strong>EmailTemplates</strong> 
folder of .Application project (<strong>default.html</strong>). You can change 
default email tamplete here.</p>
<p> <strong>Email sending</strong> is disabled in DEBUG 
mode. Because, development environment may not be configured properly to send 
emails. You can enable it if you want. It's enabled in RELEASE mode.</p>
<h4>BinaryObjectManager</h4>
<p>User <strong>profile pictures</strong> are stored in database, instead of 
file system. But it's not stored in Users table for performance reasons (Users 
are frequently retrieved from database, but profile pictures are rarely needed).</p>
<p>A general-purpose binary saving mechanism built in ASP.NET Zero. <strong>
BinaryObject</strong> entity can be used to save any type of binary objects 
(byte arrays). Since a profile picture can be converted to a byte array, user 
profile pictures are saved here.</p>
<p><strong>IBinaryObjectManager</strong> interface defines methods to save, get 
and delete binary objects. <strong>DbBinaryObjectManager</strong> implementes it 
to save binary object in database. For example, <strong>ProfileController</strong> 
uses IBinaryObjectManager to get current user's profile picture from database.</p>
<h4>Soft Deletes</h4>
<p>It's common to use the <strong>soft-delete</strong> pattern which is used to not delete an entity from database but only mark it as 'deleted'.
So, if an entity is soft-deleted, it should not be accidently retrieved into the application.&nbsp;ABP's
<strong>data filters</strong> make this automatically.</p>
<p>In ASP.NET Zero, Tenants, Users and Roles are soft-deleted. See ABP's
<a href="http://www.aspnetboilerplate.com/Pages/Documents/Data-Filters">data 
filter documentation</a> for more information about this topic.</p>
<h4>Bundling &amp; Minifying</h4>
<p>ASP.NET Zero uses
<a href="https://www.nuget.org/packages/Microsoft.AspNet.Web.Optimization" target="_blank">
ASP.NET Optimization</a> for bundling &amp; minifying script and style files. All 
bundles are defined in <strong>BundleConfig</strong> class. Also, see <strong>
ScriptPaths</strong> and <strong>StylePaths</strong> classes. They contains 
constants for locations of js and css files.</p>
<h4>Base Classes</h4>
<p>There are some useful base classes used in the application:</p>
<ul>
	<li>PhoneBook<strong>AppServiceBase</strong> can be used as a base class for 
	all <strong>application services</strong>.</li>
	<li>PhoneBook<strong>DomainServiceBase</strong> can be used as a base class 
	for <strong>domain services</strong>.</li>
	<li>PhoneBook<strong>ControllerBase</strong> 
	can be used as a base class for ASP.NET <strong>MVC Controllers</strong>.</li>
	<li>PhoneBook<strong>WebViewPageBase</strong> 
	can be used as a base class for ASP.NET <strong>MVC Views</strong>. 
	Actually, all views are automatically inherit this since it's defined in 
	web.config files. So, you can add some common properties/methods here to use 
	in all views.</li>
	<li>PhoneBook<strong>ServiceBase</strong> can be used as a base class for 
	other service-like classes. UserEmailer class inherits it, for instance.</li>
	<li>PhoneBook<strong>RepositoryBase</strong> can be used as a base class for 
	repository implementations.</li>
	<li>PhoneBook<strong>ApiControllerBase</strong> can be used as a base class 
	for regular Web API Controllers.</li>
</ul>
<p>It's strongly recommended to inherit one of these classes upon your needs 
since they really make Logging, Localization, Authorization... easier.</p>
<h4>Versioning</h4>
<p><strong>AppVersionHelper</strong> class is used to define <strong>current version</strong> of the 
application in single place. When you change <strong>Version</strong> here, all 
projects in the application will be verisoned. Also, version and release date 
automatically shown bottom left corner in the application pages. This helps us 
to see running application version always.</p>
<h3>Unit testing</h3>
<p>ASP.NET Zero startup project contains <strong>unit</strong> and <strong>integration</strong> tests. Tests are developed using following tools:</p>
<ul>
	<li><a href="http://xunit.github.io/" target="_blank">xUnit</a> as testing 
	framework.</li>
	<li><a href="https://github.com/shouldly/shouldly" target="_blank">Shouldly</a> 
	as assertion library.</li>
	<li><a href="https://github.com/tamasflamich/effort" target="_blank">Effort</a> 
	for mocking entity framework and database.</li>
	<li><a href="http://www.nuget.org/packages/Abp.TestBase">Abp.TestBase</a> to 
	simplify integration testing for ABP based applications.</li>
</ul>
<p>Tests cover <strong>Domain </strong>(core) and <strong>Application</strong> 
layers of the project. Open Test Explorer (Test\Windows\Test Explorer in VS main 
menu) to run unit tests:</p>
<p>
<img class="img-thumbnail" alt="Some unit tests" height="244" src="images/unit-tests.png" width="555" /></p>
<p>These unit tests will be a guide to understand the code. Also, they can be a 
model while writing your own unit tests for your application's functionalities.</p>
<p>All unit test classes (actually they are integration tests since they work 
integrated to ABP, EntityFramework, AutoMapper and other libraries used up to 
application layer) are derived from <strong>AppTestBase</strong>. It initializes ABP 
system, mocks database using Effort, creates initial test data and logins to the 
application for each tests. It also provides some useful common methods for all 
tests.</p>
<p>Here, a sample unit test in the application:</p>
<pre lang="cs">public class UserAppService_Delete_Tests : UserAppServiceTestBase
{
    [Fact]
    public async Task Should_Delete_User()
    {
        //Arrange
        CreateTestUsers();

        var user = await GetUserByUserNameOrNullAsync(&quot;artdent&quot;);
        user.ShouldNotBe(null);

        //Act
        await UserAppService.DeleteUser(new IdInput&lt;long&gt;(user.Id));

        //Assert
        user = await GetUserByUserNameOrNullAsync(&quot;artdent&quot;);
        user.IsDeleted.ShouldBe(true);
    }
}</pre>
<p>It creates some users to test and then verifies there is a user named 
"artdent". Then it calls <strong>DeleteUser</strong> method of the <strong>user 
application service</strong> (which is being tested). Finally, checks if user is 
deleted. Here, User is a Soft Delete entity, so it's <strong>IsDeleted</strong>  
property must be true if it's deleted.</p>

<p>You can read
<a href="http://www.codeproject.com/Articles/871786/Unit-testing-in-Csharp-using-xUnit-Entity-Framewor">
this article</a> to understand unit testing better.</p>

</body>

</html>
